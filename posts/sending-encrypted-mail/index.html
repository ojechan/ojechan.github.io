<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
><head>
  <title>
    Jishnu Nair
      |
      Sending Encrypted Mail using Thunderbird


    

  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.80.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta
    name="description"
    content="
      Step-step guide for sending encrypted email using Thunderbird client


    "
  />
  
  
  
  <link
    rel="stylesheet"
    href="/css/main.min.434ce6c2cf99470229c97942938ea6df4290442385c4abe17131296844239b4a.css"
    integrity="sha256-Q0zmws&#43;ZRwIpyXlCk46m30KQRCOFxKvhcTEpaEQjm0o="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.f798cbda9aaa38f89eb38be6414bd082cfd71a6780375cbf67b6d2fb2b96491e.css"
    integrity="sha256-95jL2pqqOPies4vmQUvQgs/XGmeAN1y/Z7bS&#43;yuWSR4="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous"
  />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

  <link rel="canonical" href="/posts/sending-encrypted-mail/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.2a2cd9614b7d007dfbb75e8da19e3a0fa872ceab53c6d000c00b7a0c89b85bfc.js"
    integrity="sha256-KizZYUt9AH37t16NoZ46D6hyzqtTxtAAwAt6DIm4W/w="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.7fd87181cdd7e8413aa64b6867bb32f3a8dc242e684fc7d5bbb9f600dbc2b6eb.js"
      integrity="sha256-f9hxgc3X6EE6pktoZ7sy86jcJC5oT8fVu7n2ANvCtus="
      crossorigin="anonymous"
    ></script>

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sending Encrypted Mail using Thunderbird"/>
<meta name="twitter:description" content="Step-step guide for sending encrypted email using Thunderbird client"/>



  
</head>
<body>
    <header><div
  class="page-top 
    animated fadeInDown

  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
    <span aria-hidden="true"></span>
  </a>
  <nav>
    <ul class="nav__list" id="navMenu">
      <div class="nav__links">
        
        
          
          <li>
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/posts/"
              
              title=""
              >Posts</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/about/"
              
              title=""
              >About</a
            >
          </li>

        
          
          <li>
            <a
              
              href="/contact/"
              
              title=""
              >Contact</a
            >
          </li>

        
        
      </div>
      <li>
        
          <a class="theme-switch" title="Switch Theme">
            <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
          </a>

        
      </li>
    </ul>
  </nav>
</div>
</header>
    <div class="wrapper">
      <aside><div
  class="sidebar
    animated fadeInDown

  "
>
  <div class="sidebar__content">
    <div class="logo-title">
      <div class="title">
        <img src="/images/jishnu.png" alt="profile picture" />
        <h3 title=""><a href="/">Jishnu Nair</a></h3>
        <div class="description">
          <p>Blogger, Reader, Coder, Daydreamer<br />Trivandrum, India<br /></p>
        </div>
      </div>
    </div>
    <ul class="social-links">
      
        <li>
          <a href="mailto:mail@jishnunair.net" rel="me" aria-label="e-mail">
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
        <li>
          <a href="/posts/index.xml" rel="me" aria-label="rss">
            <i class="fas fa-rss fa-2x" aria-hidden="true"></i>
          </a>
        </li>

      
    </ul>
  </div><footer class="footer footer--sidebar">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          Jishnu Nair
          2021


        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js"
    integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main>
        <div class="autopagerize_page_element">
          <div class="content">
  <div
    class="post 
      animated fadeInDown

    "
  >
    <div class="post-content">
      
      <div class="post-title">
        <h1>Sending Encrypted Mail using Thunderbird</h1>
        
      </div><h2 id="how-to-send-encrypted-mail-to-a-known-recipient">How to send encrypted mail to a known recipient</h2>
<p>Let&rsquo;s first address the elephant in the room: <strong>Gmail</strong>.</p>
<p>Almost everybody you know uses Gmail as their primary mail address. Gmail offers various &ldquo;services&rdquo; like smart-reply, which can be rephrased to say that Gmail reads your damn email. It has processed billions of emails to come up with a model which outputs near-perfect replies. Impressive tech, but as always, convenience at the cost of privacy.</p>
<p>There are many options for encrypting email, and we need a solution which really guarantees that the message we type is not read by anybody else other than the intended recipient. For this purpose, we will be using an email client which supports encryption. Why an email client? Because Gmail doesn&rsquo;t provide any native solution where Google doesn&rsquo;t read our email. Of course, there are other providers like <a href="https://protonmail.com/">ProtonMail</a>, but let&rsquo;s address the elephant in the room for now. I will be using <a href="https://www.thunderbird.net/en-US/">Thunderbird</a> as our email client. Thunderbird is a free and open-source email client which can be run on Windows, Mac and Linux. It supports end-to-end encryption using the OpenPGP standard, which we will be using.</p>
<h2 id="how-to-encrypt-messagesor-anything-else">How to encrypt messages(or anything else)</h2>
<p>This is a topic which can get quite complicated, but let&rsquo;s just keep it simple. We need to generate a <strong>key-pair</strong> using the <strong>OpenPGP</strong> standard. There are various implementations of the OpenPGP standard including <a href="https://gnupg.org/">GnuPG</a>, but to keep things simple, we&rsquo;ll be generating a key-pair using Thunderbird client itself.</p>
<p>How are messages encrypted using the key-pair? The key-pair includes a private key and a public key. A message intended for a particular recipient should be encrypted using the recipient&rsquo;s public key. The resulting bits of information can only be decrypted using the recipient&rsquo;s private key, which only the recipient will have. I hope that was simple enough. If somebody wants to send me an encrypted message, they have to encrypt the message using my public key which I have shared. Using this method only I can decrypt the message, and not the platform used to send the email, like Gmail for instance.</p>
<p>That&rsquo;s as much of the rabbit hole we&rsquo;ll be going down today, as far as encryption is concerned. As you can imagine, managing and securing your key-pair is a vast topic, many of the intricacies I am not touching upon here.</p>
<p>Once the key-pair is generated, the sender and the recipient have to exchange public keys. The public key of the recipient can be imported in Thunderbird, and we&rsquo;re good to send encrypted mails.</p>
<p><strong>Note:</strong> You can understand how important it is to keep our private key secure. The private key itself will be password protected, but still we have to be <em>very</em> careful with how we store our private key. I personally store mine inside a keypass database, but there are even <a href="https://www.yubico.com/products/yubikey-5-overview/">better</a> solutions.</p>
<blockquote>
<p>You might also be wondering, &ldquo;How come I&rsquo;m hearing about key-pairs for the first time, even when I&rsquo;ve been using end-to-end encrypted platforms like Signal?&rdquo;
Keep in mind that most such platforms have some sort of arrangement for storing the users' keys. We are bascially trusting the providers with our key-pairs, and <em>hoping</em> that they wouldn&rsquo;t do something spooky.
The best approach would be to have control over our keys, which we are discussing here.</p>
</blockquote>
<h2 id="step-by-step-guide-on-configuring-thunderbird-and-adding-keys">Step-by-Step Guide on configuring Thunderbird and adding keys</h2>
<p>Let&rsquo;s get to it. For this tutorial, let&rsquo;s get a Gmail account added to Thunderbird and setup encryption.</p>
<h4 id="step-1-install-thunderbird">Step 1: Install Thunderbird</h4>
<p>Windows users can <a href="https://www.thunderbird.net/en-US/download/">download</a> the executable and install the application, while Linux users can use the package manager in their distribution of choice or use the Software application provided by the desktop environment. I&rsquo;ve never used Mac to be honest, but the Mac version is listed in the Downloads page. Check out the <a href="https://support.mozilla.org/en-US/kb/installing-thunderbird-on-mac">Mozilla support page</a> for installing on Mac.</p>
<h4 id="step-2-configure-app-passwords-in-gmail">Step 2: Configure App passwords in Gmail</h4>
<p>Google doesn&rsquo;t make it easy to setup SMTP and IMAP access to Gmail. After trying out a couple of options, I saw that configuring App passwords is the best option with other email clients like Thunderbird or K-9 Mail.</p>
<p>Navigate to &ldquo;Manage your Google Account&rdquo; in Gmail, and then to &ldquo;Security&rdquo; -&gt; &ldquo;Signing in to Google&rdquo; -&gt; &ldquo;App Passwords&rdquo;</p>
<p>Go ahead and create an app password for Thunderbird.</p>
<p><img src="/images/thunderbird/google-app-password.png" alt="setup-google-app-password"></p>
<p><em>Set up Gmail App Password</em></p>
<p><strong>Note:</strong> I am assuming that you have 2-factor authentication enabled in your account. App passwords are required only in that case. If you have not configured 2-factor authentication, I <em>strongly</em> advise you to do so. The best way would be to use an Authenticator app like <a href="https://f-droid.org/en/packages/com.beemdevelopment.aegis/">Aegis Authenticator</a>.</p>
<h4 id="step-3-add-gmail-account-in-thunderbird">Step 3: Add Gmail account in Thunderbird</h4>
<p>Open Thunderbird, and click on &ldquo;Set Up Another Account&rdquo; -&gt; &ldquo;Email&rdquo;</p>
<p>Enter your name, gmail address, the app password generated in previous step,and then click on &ldquo;Configure Manually&rdquo;. We just have to make sure that the correct IMAP and SMTP addresses and ports are used.</p>
<p><img src="/images/thunderbird/thunderbird-setup-gmail-account.png" alt="add-gmail-account-thunderbird"></p>
<p><em>Manually configuring Gmail account in Thunderbird</em></p>
<h4 id="step-4-create-key-pair-in-thunderbird">Step 4: Create key-pair in Thunderbird</h4>
<p>Thunderbird has the option of importing an existing key-pair, but for this exercise let&rsquo;s just create an key-pair in Thunderbird. We can export the key in the future if we have to change clients for whatever reason.</p>
<p>Navigate to &ldquo;Account Settings&rdquo; -&gt; &lt;Email account you added&gt; -&gt; &ldquo;End-To-End Encryption&rdquo;</p>
<p><img src="/images/thunderbird/thunderbird-encryption-menu.png" alt="thunderbird-encryption-menu"></p>
<p>Click on &ldquo;Add Key&rdquo; to create/import a new key-pair.</p>
<p><img src="/images/thunderbird/thunderbird-create-key.png" alt="thunderbird-create-key"></p>
<p>As shown above, a key pair tied to the email address can be created. Additional options are available like setting expiration date for the key. It is acceptable to set the key to never expire. We can also change the encryption algorithm and the key size. Increasing the key size makes it harder to decrypt using brute-force attacks, but generally it&rsquo;s fine to go with the default settings.</p>
<p>Now click on &ldquo;Generate Key&rdquo; and we&rsquo;re done!</p>
<h4 id="step-5-sending-an-encrypted-email-using-the-new-key">Step 5: Sending an encrypted email using the new key</h4>
<p>Now that we have created our key-pair, we need to exchange public keys with our recipients. There are various ways of doing this, including <a href="https://pgp.mit.edu/">key servers</a>, but let&rsquo;s just send the public key as attachment in an email. To verify it&rsquo;s authencity, there is a way to sign the key to generate a fingerprint. The recipient can check the fingerprint to see if the key has been tampered in transit. I&rsquo;ll discuss that in another blog.</p>
<p>Once we have exchanged public keys with our recipient, we can import this public key in the &ldquo;OpenPGP Key Manager&rdquo; menu in the &ldquo;End-To-End Encryption&rdquo; setting we discussed earlier.</p>
<p><img src="/images/thunderbird/thunderbird-import-key.png" alt="importing-public-key"></p>
<p><em>Importing public key of recipient</em></p>
<p>After we have imported the public key of the recipient, we can enable encryption using the &ldquo;Security&rdquo; dropdown while drafting an email.</p>
<p><img src="/images/thunderbird/thunderbird-security-button.png" alt="thunderbird-security-button"></p>
<p><em>Enabling encryption while drafting an email</em></p>
<p>We can verify that public key for the recipient has been added by clicking on the &ldquo;Security&rdquo; button.</p>
<p><img src="/images/thunderbird/thunderbird-recipient-key.png" alt="thunderbird-recipient-key"></p>
<p>And that&rsquo;s it! Type whatever you want and send!</p>
<h3 id="final-thoughts">Final Thoughts</h3>
<p>This might seem a contradiction to say at this point, but is email really a secure messaging platform? The answer is <strong>No, of course not!</strong>.</p>
<p>We have discussed adding an encryption layer for the contents of an email, but the fact remains that metadata regarding the email is exchanged between Mail Transport Agents in a non-encrypted fashion. In short, email is <em>not private by design</em>. There are more secure channels of communication which does not need dependance on a service provider. Some examples are <a href="https://briarproject.org/">Briar</a> and other applications like <a href="https://element.io/matrix-services">Element</a> and <a href="https://www.syphon.org/">Syphon</a>, which are built on the Matrix protocol.</p>
<p>Thank you for reading!</p>
</div>
    <div class="post-footer">
      <div class="info">
        
          <span class="separator"><a class="category" href="/categories/tech/">tech</a></span>




        

        
          <span class="separator"><a class="tag" href="/tags/encryption/">encryption</a><a class="tag" href="/tags/email/">email</a><a class="tag" href="/tags/thunderbird/">thunderbird</a></span>




        
      </div>
    </div>

    
  </div>


          </div>
        </div>
      </main>
    </div><footer class="footer footer--base">
  <div class="by_farbox">
    <ul class="footer__list">
      <li class="footer__item">
        &copy;
        
          Jishnu Nair
          2021


        
      </li>
      
    </ul>
  </div>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js"
    integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I="
    crossorigin="anonymous"
  ></script></body>
</html>
